<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AKTIEN KRYPTO HANTEL AG</title>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.9.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body { font-family: Arial, sans-serif; margin:20px; background:#ffffff; color:#000; }
    h1 { font-size:24px; margin-bottom:15px; }
    label, select, button { display:block; margin:5px 0; }
    select, button { padding:5px; font-size:14px; }
    #progressBar { width:100%; height:20px; margin-top:10px; }
    #progressText { margin:5px 0; font-weight:bold; }
    #hiddenStatus { margin:10px 0; font-weight:bold; color:green; }
    table { border-collapse: collapse; width:100%; margin-top:10px; }
    th, td { border:1px solid #000; padding:5px; text-align:center; }
    canvas { margin-top:10px; }
</style>
</head>
<body>

<h1>AKTIEN KRYPTO HANTEL AG</h1>

<label for="assetSelect">Asset auswählen:</label>
<select id="assetSelect"></select>

<label for="periodSelect">Analysezeitraum (Tage):</label>
<select id="periodSelect">
    <option value="30">30</option>
    <option value="60">60</option>
    <option value="90">90</option>
    <option value="120">120</option>
</select>

<button id="analyseBtn">Analyse starten</button>

<progress id="progressBar" value="0" max="100"></progress>
<div id="progressText"></div>

<div id="currentPrice"></div>
<div id="hiddenStatus"></div>

<!-- Tabelle -->
<div id="out"></div>

<!-- Chart -->
<canvas id="chart" width="800" height="400"></canvas>

<script src="analyse.js"></script>

<script>
// Tabelle und Chart wie früher
function displayTable(sym, hist, preds, fx){
    const container = document.getElementById("out");
    container.innerHTML = "";

    const table = document.createElement("table");
    const header = document.createElement("tr");
    header.innerHTML = "<th>Tag</th><th>Historisch</th><th>Prognose</th><th>CHF</th>";
    table.appendChild(header);

    for(let i=0;i<hist.length;i++){
        const row = document.createElement("tr");
        const histVal = hist[i] || 0;
        const predVal = preds[i] || "-";
        row.innerHTML = `<td>${i+1}</td>
                         <td>${histVal.toFixed(2)}</td>
                         <td>${typeof predVal === "number" ? predVal.toFixed(2) : predVal}</td>
                         <td>${fx ? (histVal*fx).toFixed(2) : "-"}</td>`;
        table.appendChild(row);
    }

    container.appendChild(table);

    // Chart
    if(window.chart) window.chart.destroy();
    const ctx = document.getElementById("chart").getContext("2d");
    window.chart = new Chart(ctx, {
        type:"line",
        data:{
            labels:hist.map((v,i)=>i+1),
            datasets:[
                {label:"Historisch", data:hist, borderColor:"blue", fill:false},
                {label:"Prognose", data:preds, borderColor:"red", fill:false}
            ]
        },
        options:{
            responsive:true,
            plugins:{legend:{position:"top"}}
        }
    });
}
</script>

</body>
</html>
